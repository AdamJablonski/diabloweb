(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{57:function(e,t,n){"use strict";n.r(t);var r=n(8),o=Object(r.a)();window.addEventListener("message",function(e){var t=e.data,n=e.source;"transfer"===t.method?o.then(function(e){var t=e.files;n.postMessage({method:"storage",files:t},"*")}):"clear"===t.method&&o.then(function(e){return(0,e.clear)()})})},8:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(6),o=n(1),a=n.n(o),s=n(3),c=n(9),i=n.n(c),u=function(){return new Promise(function(e,t){var n=!1,r=document.createElement("iframe");window.addEventListener("message",function(t){var o=t.data;"storage"!==o.method||n||(n=!0,e(o.files),r.contentWindow.postMessage({method:"clear"},"*"))}),r.addEventListener("load",function(){r.contentWindow.postMessage({method:"transfer"},"*")}),r.addEventListener("error",function(){n||(n=!0,e(null))}),r.src="https://diablo.rivsoft.net/storage.html",r.style.display="none",document.body.appendChild(r),setTimeout(function(){n||(n=!0,e(null))},1e4)})};function d(e,t){return l.apply(this,arguments)}function l(){return(l=Object(s.a)(a.a.mark(function e(t,n){var r,o,s,c;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(n.toLowerCase());case 2:(r=e.sent)?(o=new Blob([r],{type:"binary/octet-stream"}),s=URL.createObjectURL(o),(c=document.createElement("a")).setAttribute("href",s),c.setAttribute("download",n),document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(s)):console.error("File ".concat(n," does not exist"));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function f(e){return p.apply(this,arguments)}function p(){return(p=Object(s.a)(a.a.mark(function e(t){var n,o,s,c,l,f,p,v,w,b,m,h,x,k,y,g,j,L;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new i.a("diablo_fs"),o=new Map,s=0,e.t0=Object,e.next=7,n.json();case 7:e.t1=e.sent,c=e.t0.entries.call(e.t0,e.t1);case 9:if(!(s<c.length)){e.next=18;break}l=c[s],f=Object(r.a)(l,2),p=f[0],v=f[1],o.set(p,v);case 15:s++,e.next=9;break;case 18:if(!t){e.next=42;break}return e.next=21,u();case 21:if(!(w=e.sent)){e.next=42;break}for(b=!0,m=!1,h=void 0,e.prev=26,x=w[Symbol.iterator]();!(b=(k=x.next()).done);b=!0)y=k.value,g=Object(r.a)(y,2),j=g[0],L=g[1],w.set(j,L),n.set(j,L);e.next=34;break;case 30:e.prev=30,e.t2=e.catch(26),m=!0,h=e.t2;case 34:e.prev=34,e.prev=35,b||null==x.return||x.return();case 37:if(e.prev=37,!m){e.next=40;break}throw h;case 40:return e.finish(37);case 41:return e.finish(34);case 42:return window.DownloadFile=function(e){return d(n,e)},e.abrupt("return",{files:o,update:function(e,t){return n.set(e,t)},delete:function(e){return n.remove(e)},clear:function(){return n.clear()}});case 46:return e.prev=46,e.t3=e.catch(0),window.DownloadFile=function(){return console.error("IndexedDB is not supported")},e.abrupt("return",{files:new Map,update:function(){return Promise.resolve()},delete:function(){return Promise.resolve()},clear:function(){return Promise.resolve()}});case 50:case"end":return e.stop()}},e,null,[[0,46],[26,30,34,42],[35,,37,41]])}))).apply(this,arguments)}}},[[57,3,0]]]);
//# sourceMappingURL=storage.2faf6f7c.chunk.js.map