(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{57:function(e,t,n){"use strict";n.r(t);var r=n(8),o=Object(r.a)();window.addEventListener("message",function(e){var t=e.data,n=e.source;"transfer"===t.method?o.then(function(e){var t=e.files;n.postMessage({method:"storage",files:t},"*")}):"clear"===t.method&&o.then(function(e){return(0,e.clear)()})})},8:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n(6),o=n(1),a=n.n(o),s=n(3),u=n(9),c=n.n(u),i=function(){return new Promise(function(e,t){var n=!1,r=document.createElement("iframe");window.addEventListener("message",function(t){var o=t.data;"storage"!==o.method||n||(n=!0,e(o.files),r.contentWindow.postMessage({method:"clear"},"*"))}),r.addEventListener("load",function(){r.contentWindow.postMessage({method:"transfer"},"*")}),r.addEventListener("error",function(){n||(n=!0,e(null))}),r.src="https://diablo.rivsoft.net/storage.html",r.style.display="none",document.body.appendChild(r),setTimeout(function(){n||(n=!0,e(null))},1e4)})};function d(e,t){return f.apply(this,arguments)}function f(){return(f=Object(s.a)(a.a.mark(function e(t,n){var r,o,s,u;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(n.toLowerCase());case 2:(r=e.sent)?(o=new Blob([r],{type:"binary/octet-stream"}),s=URL.createObjectURL(o),(u=document.createElement("a")).setAttribute("href",s),u.setAttribute("download",n),document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(s)):console.error("File ".concat(n," does not exist"));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var l=function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(){return t(r.result)},r.onerror=function(){return n(r.error)},r.onabort=function(){return n()},r.readAsArrayBuffer(e)})};function p(e,t,n){return w.apply(this,arguments)}function w(){return(w=Object(s.a)(a.a.mark(function e(t,n,r){var o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,l(r);case 3:return e.t1=e.sent,o=new e.t0(e.t1),n.set(r.name.toLowerCase(),o),e.abrupt("return",t.set(r.name.toLowerCase(),o));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function v(e){return m.apply(this,arguments)}function m(){return(m=Object(s.a)(a.a.mark(function e(t){var n,o,s,u,f,l,w,v,m,b,h,x,y,k,L,g,j,O;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new c.a("diablo_fs"),o=new Map,s=0,e.t0=Object,e.next=7,n.json();case 7:e.t1=e.sent,u=e.t0.entries.call(e.t0,e.t1);case 9:if(!(s<u.length)){e.next=18;break}f=u[s],l=Object(r.a)(f,2),w=l[0],v=l[1],o.set(w,v);case 15:s++,e.next=9;break;case 18:if(!t){e.next=42;break}return e.next=21,i();case 21:if(!(m=e.sent)){e.next=42;break}for(b=!0,h=!1,x=void 0,e.prev=26,y=m[Symbol.iterator]();!(b=(k=y.next()).done);b=!0)L=k.value,g=Object(r.a)(L,2),j=g[0],O=g[1],m.set(j,O),n.set(j,O);e.next=34;break;case 30:e.prev=30,e.t2=e.catch(26),h=!0,x=e.t2;case 34:e.prev=34,e.prev=35,b||null==y.return||y.return();case 37:if(e.prev=37,!h){e.next=40;break}throw x;case 40:return e.finish(37);case 41:return e.finish(34);case 42:return window.DownloadFile=function(e){return d(n,e)},e.abrupt("return",{files:o,update:function(e,t){return n.set(e,t)},delete:function(e){return n.remove(e)},clear:function(){return n.clear()},upload:function(e){return p(n,o,e)}});case 46:return e.prev=46,e.t3=e.catch(0),window.DownloadFile=function(){return console.error("IndexedDB is not supported")},e.abrupt("return",{files:new Map,update:function(){return Promise.resolve()},delete:function(){return Promise.resolve()},clear:function(){return Promise.resolve()},upload:function(){return Promise.resolve()}});case 50:case"end":return e.stop()}},e,null,[[0,46],[26,30,34,42],[35,,37,41]])}))).apply(this,arguments)}}},[[57,3,0]]]);
//# sourceMappingURL=storage.447359e6.chunk.js.map