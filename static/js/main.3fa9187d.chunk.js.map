{"version":3,"sources":["api/game.worker.js","serviceWorker.js","api/sound.js","api/load_spawn.js","api/loader.js","App.js","index.js","fs.js"],"names":["module","exports","Worker","__webpack_require__","p","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","init_sound","AudioContext","webkitAudioContext","StereoPannerNode","webkitAudioPannerNode","create_sound","duplicate_sound","play_sound","set_volume","stop_sound","delete_sound","context","e","sounds","Map","create_sound_raw","id","data","length","channels","rate","buffer","createBuffer","i","getChannelData","set","subarray","Promise","resolve","gain","createGain","panner","pan","reject","decodeAudioData","srcId","src","get","volume","loop","source","stop","value","Math","pow","relVolume","createBufferSource","node","connect","destination","start","delete","stop_all","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","_ref3","sound","Object","slicedToArray","err","return","clear","SpawnSizes","load_spawn","_x","_x2","_load_spawn","apply","this","arguments","_callee","api","fs","file","spawn","regenerator_default","a","wrap","_context","prev","files","includes","byteLength","axios","request","url","process","responseType","onDownloadProgress","onProgress","text","loaded","total","headers","Cache-Control","sent","Error","Uint8Array","update","slice","abrupt","onRender","ctx","_ref","bitmap","images","clip","belt","transferFromImageBitmap","_ref5","x","y","w","h","image","createImageData","putImageData","save","font","x0","y0","x1","y1","beginPath","rect","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_ref4","str","color","r","g","b","fillStyle","concat","fillText","restore","updateBelt","audio","mpq","offscreen","canvas","getContext","alpha","worker","addEventListener","_ref6","action","func","_len","params","Array","_key","postMessage","batch","toConsumableArray","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_ref8","setCursorPos","openKeyboard","onError","stack","onExit","setCurrentSave","name","transfer","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_ref11","push","websocket","gameServer","load_game","do_load_game","reportLink","retail","message","URL","searchParams","split","map","line","join","userAgent","toString","ReactGA","initialize","pageview","TOUCH_MOVE","TOUCH_RMB","Link","children","props","objectWithoutProperties","react_default","createElement","assign","target","rel","App","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","started","loading","dropping","has_spawn","cursorPos","touchControls","touchButtons","touchCtx","touchMods","touchBelt","create_fs","onDrop","dataTransfer","items","kind","getAsFile","getDropFile","preventDefault","setState","onDragEnter","setDropping","onDragOver","isDropFile","onDragLeave","downloadSave","saveName","download","stopPropagation","onResize","document","exitPointerLock","onPointerLockChange","screen","innerHeight","height","pointerLocked","game","onMouseMove","_this$mousePos","mousePos","eventMods","onMouseDown","keyboard","element","classList","remove","_this$mousePos2","requestPointerLock","mouseButton","onMouseUp","_this$mousePos3","onKeyDown","keyCode","key","showKeyboard","charCodeAt","clearKeySel","onMenu","onKeyUp","onKeyboard","_this2","valid","substring","values","_","parseFile","touchButton","touchCanvas","onTouchStart","updateTouchButton","touches","_this$mousePos4","onTouchMove","_this$mousePos5","onTouchEnd","prevTc","_this$mousePos6","index","setTouchButton","fullscreenElement","requestFullscreen","setCanvas","setElement","setKeyboard","setTouch0","setTouch_","bind","assertThisInitialized","setTouch1","setTouch2","setTouch3","setTouchBelt_","setTouch4","setTouch5","_this3","inc","_ref2","max","left","toFixed","top","width","add","style","focus","blur","_this4","getBoundingClientRect","right","bottom","setTimeout","progress","reload","idx","slot","display","drawImage","used","Set","pos","has","drawBelt","_this5","upload","removeEventListener","event","category","passive","capture","pointerLockElement","mozPointerLockElement","min","movementX","movementY","clientX","clientY","round","button","shiftKey","ctrlKey","altKey","len","setSelectionRange","use","toggle","now","performance","beltTime","release","_this6","touchOther","btn","_loop","identifier","stick","find","t","panPos","v","indexOf","original","_ret","setTouchMod","dx","dy","step","offsetHeight","abs","appendChild","_this7","_this$state","className","classNames","touch","ref","active","type","onChange","spellCheck","App_Link","href","onClick","htmlFor","accept","React","Component","ReactDOM","render","src_App_0","getElementById","origin","fetch","response","contentType","status","ready","unregister","checkValidServiceWorker","importStorage","frame","method","contentWindow","body","downloadFile","store","blob","lnk","C_Work_diabloweb_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","toLowerCase","Blob","createObjectURL","setAttribute","click","removeChild","revokeObjectURL","downloadSaves","_callee2","_context2","keys","t0","t1","finish","readFile","reader","FileReader","onload","result","onerror","onabort","readAsArrayBuffer","uploadFile","_callee3","_context3","_x7","_create_fs","_callee4","load","_i","_Object$entries","_ref7","_name","_data","_files","_context4","IdbKvStore","json","entries","C_Work_diabloweb_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","t2","DownloadFile","DownloadSaves","t3"],"mappings":"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","file":"static/js/main.3fa9187d.chunk.js","sourcesContent":["module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"25340ede01a50ea61a08.worker.js\");\n};","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","function no_sound() {\r\n  return {\r\n    create_sound: () => 0,\r\n    duplicate_sound: () => 0,\r\n    play_sound: () => undefined,\r\n    set_volume: () => undefined,\r\n    stop_sound: () => undefined,\r\n    delete_sound: () => undefined,\r\n  };\r\n}\r\n\r\nfunction decodeAudioData(context, buffer) {\r\n  return new Promise((resolve, reject) => {\r\n    context.decodeAudioData(buffer, resolve, reject);\r\n  });\r\n}\r\n\r\nexport default function init_sound() {\r\n  const AudioContext = window.AudioContext || window.webkitAudioContext;\r\n  const StereoPannerNode = window.StereoPannerNode || window.webkitAudioPannerNode;\r\n  if (!AudioContext) {\r\n    return no_sound();\r\n  }\r\n\r\n  let context = null;\r\n  try {\r\n    context = new AudioContext();\r\n  } catch (e) {\r\n  }\r\n  const sounds = new Map();\r\n\r\n  return {\r\n    create_sound_raw(id, data, length, channels, rate) {\r\n      if (!context) {\r\n        return;\r\n      }\r\n      const buffer = context.createBuffer(channels, length, rate);\r\n      for (let i = 0; i < channels; ++i) {\r\n        buffer.getChannelData(i).set(data.subarray(i * length, i * length + length));\r\n      }\r\n      sounds.set(id, {\r\n        buffer: Promise.resolve(buffer),\r\n        gain: context.createGain(),\r\n        panner: StereoPannerNode && new StereoPannerNode(context, {pan: 0}),\r\n      });\r\n    },\r\n    create_sound(id, data) {\r\n      if (!context) {\r\n        return;\r\n      }\r\n      const buffer = decodeAudioData(context, data.buffer);\r\n      sounds.set(id, {\r\n        buffer,\r\n        gain: context.createGain(),\r\n        panner: StereoPannerNode && new StereoPannerNode(context, {pan: 0}),\r\n      });\r\n    },\r\n    duplicate_sound(id, srcId) {\r\n      if (!context) {\r\n        return;\r\n      }\r\n      const src = sounds.get(srcId);\r\n      if (!src) {\r\n        return;\r\n      }\r\n      sounds.set(id, {\r\n        buffer: src.buffer,\r\n        gain: context.createGain(),\r\n        panner: StereoPannerNode && new StereoPannerNode(context, {pan: 0}),\r\n      });\r\n    },\r\n    play_sound(id, volume, pan, loop) {\r\n      const src = sounds.get(id);\r\n      if (src) {\r\n        if (src.source) {\r\n          src.source.then(source => source.stop());\r\n        }\r\n        src.gain.gain.value = Math.pow(2.0, volume / 1000.0);\r\n        const relVolume = Math.pow(2.0, pan / 1000.0);\r\n        if (src.panner) {\r\n          src.panner.pan.value = 1.0 - 2.0 / (1.0 + relVolume);\r\n        }\r\n        src.source = src.buffer.then(buffer => {\r\n          const source = context.createBufferSource();\r\n          source.buffer = buffer;\r\n          source.loop = !!loop;\r\n          let node = source.connect(src.gain);\r\n          if (src.panner) {\r\n            node = node.connect(src.panner);\r\n          }\r\n          node.connect(context.destination);\r\n          source.start();\r\n          return source;\r\n        });\r\n      }\r\n    },\r\n    set_volume(id, volume) {\r\n      const src = sounds.get(id);\r\n      if (src) {\r\n        src.gain.gain.value = Math.pow(2.0, volume / 1000.0);\r\n      }\r\n    },\r\n    stop_sound(id) {\r\n      const src = sounds.get(id);\r\n      if (src && src.source) {\r\n        src.source.then(source => source.stop());\r\n        delete src.source;\r\n      }\r\n    },\r\n    delete_sound(id) {\r\n      const src = sounds.get(id);\r\n      if (src && src.source) {\r\n        src.source.then(source => source.stop());\r\n      }\r\n      sounds.delete(id);\r\n    },\r\n\r\n    stop_all() {\r\n      for (let [, sound] of sounds) {\r\n        if (sound.source) {\r\n          sound.source.then(source => source.stop());\r\n        }\r\n      }\r\n      sounds.clear();\r\n      context = null;\r\n    }\r\n  };\r\n}\r\n","import axios from 'axios';\r\n\r\nconst SpawnSizes = [50274091, 25830791];\r\n\r\nexport { SpawnSizes };\r\n\r\nexport default async function load_spawn(api, fs) {\r\n  let file = fs.files.get('spawn.mpq');\r\n  if (file && !SpawnSizes.includes(file.byteLength)) {\r\n    fs.files.delete('spawn.mpq');\r\n    await fs.delete('spawn.mpq');\r\n    file = null;\r\n  }\r\n  if (!file) {\r\n    const spawn = await axios.request({\r\n      url: process.env.PUBLIC_URL + '/spawn.mpq',\r\n      responseType: 'arraybuffer',\r\n      onDownloadProgress: e => {\r\n        if (api.onProgress) {\r\n          api.onProgress({text: 'Downloading...', loaded: e.loaded, total: e.total || SpawnSizes[1]});\r\n        }\r\n      },\r\n      headers: {\r\n        'Cache-Control': 'max-age=31536000'\r\n      }\r\n    });\r\n    if (!SpawnSizes.includes(spawn.data.byteLength)) {\r\n      throw Error(\"Invalid spawn.mpq size. Try clearing cache and refreshing the page.\");\r\n    }\r\n    const data = new Uint8Array(spawn.data);\r\n    fs.files.set('spawn.mpq', data);\r\n    fs.update('spawn.mpq', data.slice());\r\n  }\r\n  return fs;\r\n}\r\n","import Worker from './game.worker.js';\r\nimport init_sound from './sound';\r\nimport load_spawn from './load_spawn';\r\n\r\nfunction onRender(api, ctx, {bitmap, images, text, clip, belt}) {\r\n  if (bitmap) {\r\n    ctx.transferFromImageBitmap(bitmap);\r\n  } else {\r\n    for (let {x, y, w, h, data} of images) {\r\n      const image = ctx.createImageData(w, h);\r\n      image.data.set(data);\r\n      ctx.putImageData(image, x, y);\r\n    }\r\n    if (text.length) {\r\n      ctx.save();\r\n      ctx.font = 'bold 13px Times New Roman';\r\n      if (clip) {\r\n        const {x0, y0, x1, y1} = clip;\r\n        ctx.beginPath();\r\n        ctx.rect(x0, y0, x1 - x0, y1 - y0);\r\n        ctx.clip();\r\n      }\r\n      for (let {x, y, text: str, color} of text) {\r\n        const r = ((color >> 16) & 0xFF);\r\n        const g = ((color >> 8) & 0xFF);\r\n        const b = (color & 0xFF);\r\n        ctx.fillStyle = `rgb(${r}, ${g}, ${b})`;\r\n        ctx.fillText(str, x, y + 22);\r\n      }\r\n      ctx.restore();\r\n    }\r\n  }\r\n\r\n  api.updateBelt(belt);\r\n}\r\n\r\nfunction testOffscreen() {\r\n  return false;\r\n  // This works but I couldn't see any performance difference, and support for 2D canvas in workers is very poor.\r\n  // In this mode, instead of sending a batch of areas to draw back to the main thread, the worker does all drawing on its own and sends a complete bitmap object back.\r\n  // However, this effectively clears the worker's canvas, so we need to redraw the whole frame every time, which defeats the performance gained from reduced copying.\r\n  /*try {\r\n    const canvas = document.createElement(\"canvas\");\r\n    const offscreen = canvas.transferControlToOffscreen();\r\n    const context = offscreen.getContext(\"2d\");\r\n    return context != null;\r\n  } catch (e) {\r\n    return false;\r\n  }*/\r\n}\r\n\r\nasync function do_load_game(api, audio, mpq, spawn) {\r\n  const fs = await api.fs;\r\n  if (spawn && !mpq) {\r\n    await load_spawn(api, fs);\r\n  }\r\n\r\n  let context = null, offscreen = false;\r\n  if (testOffscreen()) {\r\n    context = api.canvas.getContext(\"bitmaprenderer\");\r\n    offscreen = true;\r\n  } else {\r\n    context = api.canvas.getContext(\"2d\", {alpha: false});\r\n  }\r\n  return await new Promise((resolve, reject) => {\r\n    try {\r\n      const worker = new Worker();\r\n      worker.addEventListener(\"message\", ({data}) => {\r\n        switch (data.action) {\r\n        case \"loaded\":\r\n          resolve((func, ...params) => worker.postMessage({action: \"event\", func, params}));\r\n          break;\r\n        case \"render\":\r\n          onRender(api, context, data.batch);\r\n          break;\r\n        case \"audio\":\r\n          audio[data.func](...data.params);\r\n          break;\r\n        case \"audioBatch\":\r\n          for (let {func, params} of data.batch) {\r\n            audio[func](...params);\r\n          }\r\n          break;\r\n        case \"fs\":\r\n          fs[data.func](...data.params);\r\n          break;\r\n        case \"cursor\":\r\n          api.setCursorPos(data.x, data.y);\r\n          break;\r\n        case \"keyboard\":\r\n          api.openKeyboard(data.rect);\r\n          break;\r\n        case \"error\":\r\n          audio.stop_all();\r\n          api.onError(data.error, data.stack);\r\n          break;\r\n        case \"failed\":\r\n          reject(Error(data.stack || data.error));\r\n          break;\r\n        case \"progress\":\r\n          api.onProgress({text: data.text, loaded: data.loaded, total: data.total});\r\n          break;\r\n        case \"exit\":\r\n          api.onExit();\r\n          break;\r\n        case \"current_save\":\r\n          api.setCurrentSave(data.name);\r\n          break;\r\n        default:\r\n        }\r\n      });\r\n      const transfer= [];\r\n      for (let [, file] of fs.files) {\r\n        transfer.push(file.buffer);\r\n      }\r\n      worker.postMessage({action: \"init\", files: fs.files, mpq, spawn, offscreen, websocket: window.gameServer}, transfer);\r\n      delete fs.files;\r\n    } catch (e) {\r\n      reject(e);\r\n    }\r\n  });\r\n}\r\n\r\nexport default function load_game(api, mpq, spawn) {\r\n  const audio = init_sound();\r\n  return do_load_game(api, audio, mpq, spawn);\r\n}\r\n","import React from 'react';\r\nimport './App.scss';\r\nimport classNames from 'classnames';\r\nimport ReactGA from 'react-ga';\r\n\r\nimport create_fs from './fs';\r\nimport load_game from './api/loader';\r\nimport { SpawnSizes } from './api/load_spawn';\r\n\r\nif (process.env.NODE_ENV === 'production') {\r\n  ReactGA.initialize('UA-43123589-6');\r\n  ReactGA.pageview('/');\r\n}\r\n\r\nfunction reportLink(e, retail) {\r\n  const message = e.stack || e.message || \"Unknown error\";\r\n  const url = new URL(\"https://github.com/d07RiV/diabloweb/issues/new\");\r\n  url.searchParams.set(\"body\",\r\n`**Description:**\r\n[Please describe what you were doing before the error occurred]\r\n\r\n**App version:**\r\nDiabloWeb ${process.env.VERSION} (${retail ? 'Retail' : 'Shareware'})\r\n\r\n**Error message:**\r\n    \r\n${message.split(\"\\n\").map(line => \"    \" + line).join(\"\\n\")}\r\n\r\n**User agent:**\r\n\r\n    ${navigator.userAgent}\r\n\r\n**Save file:**\r\n[Please attach the save file, if applicable. The error box should have a link to download the current save you were playing; alternatively, you can open dev console on the game page (F12) and type in ${\"`DownloadSaves()`\"}]\r\n`);\r\n  return url.toString();\r\n}\r\n\r\nfunction isDropFile(e) {\r\n  if (e.dataTransfer.items) {\r\n    for (let i = 0; i < e.dataTransfer.items.length; ++i) {\r\n      if (e.dataTransfer.items[i].kind === \"file\") {\r\n        return true;\r\n      }\r\n    }\r\n  } if (e.dataTransfer.files.length) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\nfunction getDropFile(e) {\r\n  if (e.dataTransfer.items) {\r\n    for (let i = 0; i < e.dataTransfer.items.length; ++i) {\r\n      if (e.dataTransfer.items[i].kind === \"file\") {\r\n        return e.dataTransfer.items[i].getAsFile();\r\n      }\r\n    }\r\n  } if (e.dataTransfer.files.length) {\r\n    return e.dataTransfer.files[0];\r\n  }\r\n}\r\n\r\nconst TOUCH_MOVE = 0;\r\nconst TOUCH_RMB = 1;\r\nconst TOUCH_SHIFT = 2;\r\n\r\nconst Link = ({children, ...props}) => <a target=\"_blank\" rel=\"noopener noreferrer\" {...props}>{children}</a>;\r\n\r\nclass App extends React.Component {\r\n  files = new Map();\r\n  state = {started: false, loading: false, dropping: 0, has_spawn: false};\r\n  cursorPos = {x: 0, y: 0};\r\n\r\n  touchControls = false;\r\n  touchButtons = [null, null, null, null, null, null];\r\n  touchCtx = [null, null, null, null, null, null];\r\n  touchMods = [false, false, false, false, false, false];\r\n  touchBelt = [-1, -1, -1, -1, -1, -1];\r\n\r\n  fs = create_fs(true);\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.setTouch0 = this.setTouch_.bind(this, 0);\r\n    this.setTouch1 = this.setTouch_.bind(this, 1);\r\n    this.setTouch2 = this.setTouch_.bind(this, 2);\r\n    this.setTouch3 = this.setTouchBelt_.bind(this, 3);\r\n    this.setTouch4 = this.setTouchBelt_.bind(this, 4);\r\n    this.setTouch5 = this.setTouchBelt_.bind(this, 5);\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener(\"drop\", this.onDrop, true);\r\n    document.addEventListener(\"dragover\", this.onDragOver, true);\r\n    document.addEventListener(\"dragenter\", this.onDragEnter, true);\r\n    document.addEventListener(\"dragleave\", this.onDragLeave, true);\r\n\r\n    this.fs.then(fs => {\r\n      const spawn = fs.files.get('spawn.mpq');\r\n      if (spawn && SpawnSizes.includes(spawn.byteLength)) {\r\n        this.setState({has_spawn: true});\r\n      }\r\n    });\r\n  }\r\n\r\n  onDrop = e => {\r\n    const file = getDropFile(e);\r\n    if (file) {\r\n      e.preventDefault();\r\n      this.start(file);\r\n    }\r\n    this.setState({dropping: 0});\r\n  }\r\n  onDragEnter = e => {\r\n    e.preventDefault();\r\n    this.setDropping(1);\r\n  }\r\n  onDragOver = e => {\r\n    if (isDropFile(e)) {\r\n      e.preventDefault();\r\n    }\r\n  }\r\n  onDragLeave = e => {\r\n    this.setDropping(-1);\r\n  }\r\n  setDropping(inc) {\r\n    this.setState(({dropping}) => ({dropping: Math.max(dropping + inc, 0)}));\r\n  }\r\n\r\n  onError(message, stack) {\r\n    this.setState(({error}) => !error && {error: {message, stack}});\r\n  }\r\n\r\n  openKeyboard(rect) {\r\n    if (rect) {\r\n      this.showKeyboard = {\r\n        left: `${(100 * (rect[0] - 10) / 640).toFixed(2)}%`,\r\n        top: `${(100 * (rect[1] - 10) / 480).toFixed(2)}%`,\r\n        width: `${(100 * (rect[2] - rect[0] + 20) / 640).toFixed(2)}%`,\r\n        height: `${(100 * (rect[3] - rect[1] + 20) / 640).toFixed(2)}%`,\r\n      };\r\n      this.element.classList.add(\"keyboard\");\r\n      Object.assign(this.keyboard.style, this.showKeyboard);\r\n      this.keyboard.focus();\r\n    } else {\r\n      this.showKeyboard = false;\r\n      this.element.classList.remove(\"keyboard\");\r\n      this.keyboard.blur();\r\n      this.keyboard.value = \"\";\r\n    }\r\n  }\r\n\r\n  setCursorPos(x, y) {\r\n    const rect = this.canvas.getBoundingClientRect();\r\n    this.cursorPos = {\r\n      x: rect.left + (rect.right - rect.left) * x / 640,\r\n      y: rect.top + (rect.bottom - rect.top) * y / 480,\r\n    };\r\n    setTimeout(() => {\r\n      this.game(\"DApi_Mouse\", 0, 0, 0, x, y);\r\n    });\r\n  }\r\n\r\n  onProgress(progress) {\r\n    this.setState({progress});\r\n  }\r\n\r\n  onExit() {\r\n    if (!this.state.error) {\r\n      window.location.reload();\r\n    }\r\n  }\r\n\r\n  setCurrentSave(name) {\r\n    this.saveName = name;\r\n  }\r\n  downloadSave = e => {\r\n    this.fs.then(fs => this.saveName && fs.download(this.saveName));\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n  }\r\n\r\n  drawBelt(idx, slot) {\r\n    if (!this.canvas) return;\r\n    if (!this.touchButtons[idx]) {\r\n      return;\r\n    }\r\n    this.touchBelt[idx] = slot;\r\n    if (slot >= 0) {\r\n      this.touchButtons[idx].style.display = \"block\";\r\n      this.touchCtx[idx].drawImage(this.canvas, 205 + 29 * slot, 357, 28, 28, 0, 0, 28, 28);\r\n    } else {\r\n      this.touchButtons[idx].style.display = \"none\";\r\n    }\r\n  }\r\n\r\n  updateBelt(belt) {\r\n    if (belt) {\r\n      const used = new Set();\r\n      let pos = 3;\r\n      for (let i = 0; i < belt.length && pos < 6; ++i) {\r\n        if (belt[i] >= 0 && !used.has(belt[i])) {\r\n          this.drawBelt(pos++, i);\r\n          used.add(belt[i]);\r\n        }\r\n      }\r\n      for (; pos < 6; ++pos) {\r\n        this.drawBelt(pos, -1);\r\n      }\r\n    } else {\r\n      this.drawBelt(3, -1);\r\n      this.drawBelt(4, -1);\r\n      this.drawBelt(5, -1);\r\n    }\r\n  }\r\n\r\n  start(file) {\r\n    if (file && file.name.match(/\\.sv$/i)) {\r\n      this.fs.then(fs => fs.upload(file)).then(console.log(`Updated ${file.name}`));\r\n      return;\r\n    }\r\n\r\n    document.removeEventListener(\"drop\", this.onDrop, true);\r\n    document.removeEventListener(\"dragover\", this.onDragOver, true);\r\n    document.removeEventListener(\"dragenter\", this.onDragEnter, true);\r\n    document.removeEventListener(\"dragleave\", this.onDragLeave, true);\r\n    this.setState({dropping: 0});\r\n\r\n    const retail = !!(file && file.name.match(/^diabdat\\.mpq$/i));\r\n    if (process.env.NODE_ENV === 'production') {\r\n      ReactGA.event({\r\n        category: 'Game',\r\n        action: retail ? 'Start Retail' : 'Start Shareware',\r\n      });\r\n    }\r\n\r\n    this.setState({loading: true, retail});\r\n\r\n    load_game(this, file, !retail).then(game => {\r\n      this.game = game;\r\n\r\n      document.addEventListener('mousemove', this.onMouseMove, true);\r\n      document.addEventListener('mousedown', this.onMouseDown, true);\r\n      document.addEventListener('mouseup', this.onMouseUp, true);\r\n      document.addEventListener('keydown', this.onKeyDown, true);\r\n      document.addEventListener('keyup', this.onKeyUp, true);\r\n      document.addEventListener('contextmenu', this.onMenu, true);\r\n\r\n      document.addEventListener('touchstart', this.onTouchStart, {passive: false, capture: true});\r\n      document.addEventListener('touchmove', this.onTouchMove, {passive: false, capture: true});\r\n      document.addEventListener('touchend', this.onTouchEnd, {passive: false, capture: true});\r\n\r\n      document.addEventListener('pointerlockchange', this.onPointerLockChange);\r\n      window.addEventListener('resize', this.onResize);\r\n\r\n      this.setState({started: true});\r\n    }, e => this.onError(e.message, e.stack));\r\n  }\r\n\r\n  pointerLocked() {\r\n    return document.pointerLockElement === this.canvas || document.mozPointerLockElement === this.canvas;\r\n  }\r\n\r\n  mousePos(e) {\r\n    const rect = this.canvas.getBoundingClientRect();\r\n    if (this.pointerLocked()) {\r\n      this.cursorPos.x = Math.max(rect.left, Math.min(rect.right, this.cursorPos.x + e.movementX));\r\n      this.cursorPos.y = Math.max(rect.top, Math.min(rect.bottom, this.cursorPos.y + e.movementY));\r\n    } else {\r\n      this.cursorPos = {x: e.clientX, y: e.clientY};\r\n    }\r\n    return {\r\n      x: Math.max(0, Math.min(Math.round((this.cursorPos.x - rect.left) / (rect.right - rect.left) * 640), 639)),\r\n      y: Math.max(0, Math.min(Math.round((this.cursorPos.y - rect.top) / (rect.bottom - rect.top) * 480), 479)),\r\n    };\r\n  }\r\n\r\n  mouseButton(e) {\r\n    switch (e.button) {\r\n    case 0: return 1;\r\n    case 1: return 4;\r\n    case 2: return 2;\r\n    case 3: return 5;\r\n    case 4: return 6;\r\n    default: return 1;\r\n    }\r\n  }\r\n  eventMods(e) {\r\n    return ((e.shiftKey || this.touchMods[TOUCH_SHIFT]) ? 1 : 0) + (e.ctrlKey ? 2 : 0) + (e.altKey ? 4 : 0) + (e.touches ? 8 : 0);\r\n  }\r\n\r\n  onResize = () => {\r\n    document.exitPointerLock();\r\n  }\r\n\r\n  onPointerLockChange = () => {\r\n    if (window.screen && window.innerHeight === window.screen.height && !this.pointerLocked()) {\r\n      // assume that the user pressed escape\r\n      this.game(\"DApi_Key\", 0, 0, 27);\r\n      this.game(\"DApi_Key\", 1, 0, 27);\r\n    }\r\n  }\r\n\r\n  onMouseMove = e => {\r\n    if (!this.canvas) return;\r\n    const {x, y} = this.mousePos(e);\r\n    this.game(\"DApi_Mouse\", 0, 0, this.eventMods(e), x, y);\r\n    e.preventDefault();\r\n  }\r\n\r\n  onMouseDown = e => {\r\n    if (!this.canvas) return;\r\n    if (e.target === this.keyboard) {\r\n      return;\r\n    }\r\n    if (this.touchControls) {\r\n      this.touchControls = false;\r\n      this.element.classList.remove(\"touch\");\r\n    }\r\n    const {x, y} = this.mousePos(e);\r\n    if (window.screen && window.innerHeight === window.screen.height) {\r\n      // we're in fullscreen, let's get pointer lock!\r\n      if (!this.pointerLocked()) {\r\n        this.canvas.requestPointerLock();\r\n      }\r\n    }\r\n    this.game(\"DApi_Mouse\", 1, this.mouseButton(e), this.eventMods(e), x, y);\r\n    e.preventDefault();\r\n  }\r\n\r\n  onMouseUp = e => {\r\n    if (!this.canvas) return;\r\n    if (e.target === this.keyboard) {\r\n      return;\r\n    }\r\n    const {x, y} = this.mousePos(e);\r\n    this.game(\"DApi_Mouse\", 2, this.mouseButton(e), this.eventMods(e), x, y);\r\n    e.preventDefault();\r\n  }\r\n\r\n  onKeyDown = e => {\r\n    if (!this.canvas) return;\r\n    this.game(\"DApi_Key\", 0, this.eventMods(e), e.keyCode);\r\n    if (e.keyCode >= 32 && e.key.length === 1 && !this.showKeyboard) {\r\n      this.game(\"DApi_Char\", e.key.charCodeAt(0));\r\n    }\r\n    this.clearKeySel();\r\n    if (!this.showKeyboard) {\r\n      if (e.keyCode === 8 || (e.keyCode >= 112 && e.keyCode <= 119)) {\r\n        e.preventDefault();\r\n      }\r\n    }\r\n  }\r\n\r\n  onMenu = e => {\r\n    e.preventDefault();\r\n  }\r\n\r\n  onKeyUp = e => {\r\n    if (!this.canvas) return;\r\n    this.game(\"DApi_Key\", 1, this.eventMods(e), e.keyCode);\r\n    this.clearKeySel();\r\n  }\r\n\r\n  clearKeySel() {\r\n    if (this.showKeyboard) {\r\n      const len = this.keyboard.value.length;\r\n      this.keyboard.setSelectionRange(len, len);\r\n    }\r\n  }\r\n\r\n  onKeyboard = () => {\r\n    if (this.showKeyboard) {\r\n      const text = this.keyboard.value;\r\n      const valid = (text.match(/[\\x20-\\x7E]/g) || []).join(\"\").substring(0, 15);\r\n      if (text !== valid) {\r\n        this.keyboard.value = valid;\r\n      }\r\n      this.clearKeySel();\r\n      const values = [...Array(15)].map((_, i) => i < valid.length ? valid.charCodeAt(i) : 0);\r\n      this.game(\"DApi_SyncText\", ...values);\r\n    }\r\n  }\r\n\r\n  parseFile = e => {\r\n    const files = e.target.files;\r\n    if (files.length > 0) {\r\n      this.start(files[0]);\r\n    }\r\n  }\r\n\r\n  touchButton = null;\r\n  touchCanvas = null;\r\n\r\n  setTouchMod(index, value, use) {\r\n    if (index < 3) {\r\n      this.touchMods[index] = value;\r\n      if (this.touchButtons[index]) {\r\n        this.touchButtons[index].classList.toggle(\"active\", value);\r\n      }\r\n    } else if (use && this.touchBelt[index] >= 0) {\r\n      const now = performance.now();\r\n      if (!this.beltTime || now - this.beltTime > 750) {\r\n        this.game(\"DApi_Char\", 49 + this.touchBelt[index]);\r\n        this.beltTime = now;\r\n      }\r\n    }\r\n  }\r\n\r\n  updateTouchButton(touches, release) {\r\n    let touchOther = null;\r\n    if (!this.touchControls) {\r\n      this.touchControls = true;\r\n      this.element.classList.add(\"touch\");\r\n    }\r\n    const btn = this.touchButton;\r\n    for (let {target, identifier, clientX, clientY} of touches) {\r\n      if (btn && btn.id === identifier && this.touchButtons[btn.index] === target) {\r\n        if (touches.length > 1) {\r\n          btn.stick = false;\r\n        }\r\n        btn.clientX = clientX;\r\n        btn.clientY = clientY;\r\n        this.touchCanvas = [...touches].find(t => t.identifier !== identifier);\r\n        if (this.touchCanvas) {\r\n          this.touchCanvas = {clientX: this.touchCanvas.clientX, clientY: this.touchCanvas.clientY};\r\n        }\r\n        delete this.panPos;\r\n        return this.touchCanvas != null;\r\n      }\r\n      const idx = this.touchButtons.indexOf(target);\r\n      if (idx >= 0 && !touchOther) {\r\n        touchOther = {id: identifier, index: idx, stick: true, original: this.touchMods[idx], clientX, clientY};\r\n      }\r\n    }\r\n    if (btn && !touchOther && release && btn.stick) {\r\n      const rect = this.touchButtons[btn.index].getBoundingClientRect();\r\n      const {clientX, clientY} = btn;\r\n      if (clientX >= rect.left && clientX < rect.right && clientY >= rect.top && clientY < rect.bottom) {\r\n        this.setTouchMod(btn.index, !btn.original, true);\r\n      } else {\r\n        this.setTouchMod(btn.index, btn.original);\r\n      }\r\n    } else if (btn) {\r\n      this.setTouchMod(btn.index, false);\r\n    }\r\n    this.touchButton = touchOther;\r\n    if (touchOther) {\r\n      this.setTouchMod(touchOther.index, true);\r\n      if (touchOther.index === TOUCH_MOVE) {\r\n        this.setTouchMod(TOUCH_RMB, false);\r\n      } else if (touchOther.index === TOUCH_RMB) {\r\n        this.setTouchMod(TOUCH_MOVE, false);\r\n      }\r\n      delete this.panPos;\r\n    } else if (touches.length === 2) {\r\n      const x = (touches[1].clientX + touches[0].clientX) / 2, y = (touches[1].clientY + touches[0].clientY) / 2;\r\n      if (this.panPos) {\r\n        const dx = x - this.panPos.x, dy = y - this.panPos.y;\r\n        const step = this.canvas.offsetHeight / 12;\r\n        if (Math.max(Math.abs(dx), Math.abs(dy)) > step) {\r\n          let key;\r\n          if (Math.abs(dx) > Math.abs(dy)) {\r\n            key = (dx > 0 ? 0x25 : 0x27);\r\n          } else {\r\n            key = (dy > 0 ? 0x26 : 0x28);\r\n          }\r\n          this.game(\"DApi_Key\", 0, 0, key);\r\n          // key up is ignored anyway\r\n          this.panPos = {x, y};\r\n        }\r\n      } else {\r\n        this.game(\"DApi_Mouse\", 0, 0, 24, 320, 180);\r\n        this.game(\"DApi_Mouse\", 2, 1, 24, 320, 180);\r\n        this.panPos = {x, y};\r\n      }\r\n      this.touchCanvas = null;\r\n      return false;\r\n    } else {\r\n      delete this.panPos;\r\n    }\r\n    this.touchCanvas = [...touches].find(t => !touchOther || t.identifier !== touchOther.id);\r\n    if (this.touchCanvas) {\r\n      this.touchCanvas = {clientX: this.touchCanvas.clientX, clientY: this.touchCanvas.clientY};\r\n    }\r\n    return this.touchCanvas != null;\r\n  }\r\n\r\n  onTouchStart = e => {\r\n    if (!this.canvas) return;\r\n    if (e.target === this.keyboard) {\r\n      return;\r\n    }\r\n    e.preventDefault();\r\n    if (this.updateTouchButton(e.touches, false)) {\r\n      const {x, y} = this.mousePos(this.touchCanvas);\r\n      this.game(\"DApi_Mouse\", 0, 0, this.eventMods(e), x, y);\r\n      if (!this.touchMods[TOUCH_MOVE]) {\r\n        this.game(\"DApi_Mouse\", 1, this.touchMods[TOUCH_RMB] ? 2 : 1, this.eventMods(e), x, y);\r\n      }\r\n    }\r\n  }\r\n  onTouchMove = e => {\r\n    if (!this.canvas) return;\r\n    if (e.target === this.keyboard) {\r\n      return;\r\n    }\r\n    e.preventDefault();\r\n    if (this.updateTouchButton(e.touches, false)) {\r\n      const {x, y} = this.mousePos(this.touchCanvas);\r\n      this.game(\"DApi_Mouse\", 0, 0, this.eventMods(e), x, y);\r\n    }\r\n  }\r\n  onTouchEnd = e => {\r\n    if (!this.canvas) return;\r\n    if (e.target === this.keyboard) {\r\n      return;\r\n    }\r\n    e.preventDefault();\r\n    const prevTc = this.touchCanvas;\r\n    this.updateTouchButton(e.touches, true);\r\n    if (prevTc && !this.touchCanvas) {\r\n      const {x, y} = this.mousePos(prevTc);\r\n      this.game(\"DApi_Mouse\", 2, 1, this.eventMods(e), x, y);\r\n      this.game(\"DApi_Mouse\", 2, 2, this.eventMods(e), x, y);\r\n\r\n      if (this.touchMods[TOUCH_RMB] && (!this.touchButton || this.touchButton.index !== TOUCH_RMB)) {\r\n        this.setTouchButton(TOUCH_RMB, false);\r\n      }\r\n    }\r\n    if (!document.fullscreenElement) {\r\n      this.element.requestFullscreen();\r\n    }\r\n  }\r\n\r\n  setCanvas = e => this.canvas = e;\r\n  setElement = e => this.element = e;\r\n  setKeyboard = e => this.keyboard = e;\r\n  setTouch_(i, e) {\r\n    this.touchButtons[i] = e;\r\n  }\r\n  setTouchBelt_(i, e) {\r\n    this.touchButtons[i] = e;\r\n    if (e) {\r\n      const canvas = document.createElement(\"canvas\");\r\n      canvas.width = 28;\r\n      canvas.height = 28;\r\n      e.appendChild(canvas);\r\n      this.touchCtx[i] = canvas.getContext(\"2d\");\r\n    } else {\r\n      this.touchCtx[i] = null;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {started, loading, error, progress, dropping, has_spawn} = this.state;\r\n    return (\r\n      <div className={classNames(\"App\", {touch: this.touchControls, started, dropping, keyboard: !!this.showKeyboard})} ref={this.setElement}>\r\n        <div className=\"touch-ui touch-mods\">\r\n          <div className={classNames(\"touch-button\", \"touch-button-0\", {active: this.touchMods[0]})} ref={this.setTouch0}/>\r\n          <div className={classNames(\"touch-button\", \"touch-button-1\", {active: this.touchMods[1]})} ref={this.setTouch1}/>\r\n          <div className={classNames(\"touch-button\", \"touch-button-2\", {active: this.touchMods[2]})} ref={this.setTouch2}/>\r\n        </div>\r\n        <div className=\"touch-ui touch-belt\">\r\n          <div className={classNames(\"touch-button\", \"touch-button-0\")} ref={this.setTouch3}/>\r\n          <div className={classNames(\"touch-button\", \"touch-button-1\")} ref={this.setTouch4}/>\r\n          <div className={classNames(\"touch-button\", \"touch-button-2\")} ref={this.setTouch5}/>\r\n        </div>\r\n        <div className=\"Body\">\r\n          <div className=\"inner\">\r\n            {!error && <canvas ref={this.setCanvas} width={640} height={480}/>}\r\n            <input type=\"text\" className=\"keyboard\" onChange={this.onKeyboard} ref={this.setKeyboard} spellCheck={false} style={this.showKeyboard || {}}/>\r\n          </div>\r\n        </div>\r\n        <div className=\"BodyV\">\r\n          {!!error && (\r\n            <Link className=\"error\" href={reportLink(error, this.state.retail)}>\r\n              <p className=\"header\">The following error has occurred:</p>\r\n              <p className=\"body\">{error.message}</p>\r\n              <p className=\"footer\">Click to create an issue on GitHub</p>\r\n              {this.saveName != null && <p className=\"link\" onClick={this.downloadSave}>Download save file</p>}\r\n            </Link>\r\n          )}\r\n          {!!loading && !started && !error && (\r\n            <div className=\"loading\">\r\n              {(progress && progress.text) || 'Loading...'}\r\n              {progress != null && !!progress.total && (\r\n                <span className=\"progressBar\"><span><span style={{width: `${Math.round(100 * progress.loaded / progress.total)}%`}}/></span></span>\r\n              )}\r\n            </div>\r\n          )}\r\n          {!started && !loading && !error && (\r\n            <div className=\"start\">\r\n              <p>\r\n                This is a web port of the original Diablo game, based on source code reconstructed by\r\n                GalaXyHaXz and devilution team. The project page with information and links can be found over here <Link href=\"https://github.com/d07RiV/diabloweb\">https://github.com/d07RiV/diabloweb</Link>\r\n              </p>\r\n              <p>\r\n                If you own the original game, you can drop the original DIABDAT.MPQ onto this page or click the button below to start playing.\r\n                The game can be purchased from <Link href=\"https://www.gog.com/game/diablo\">GoG</Link>.\r\n              </p>\r\n              {!has_spawn && (\r\n                <p>\r\n                  Or you can play the shareware version for free (50MB download).\r\n                </p>\r\n              )}\r\n              <form>\r\n                <label htmlFor=\"loadFile\" className=\"startButton\">Select MPQ</label>\r\n                <input accept=\".mpq\" type=\"file\" id=\"loadFile\" style={{display: \"none\"}} onChange={this.parseFile}/>\r\n              </form>\r\n              <span className=\"startButton\" onClick={() => this.start()}>Play Shareware</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './reset.css';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\nserviceWorker.register();\r\n","import IdbKvStore from  'idb-kv-store';\r\n\r\nconst importStorage = () => new Promise((resolve, reject) => {\r\n  let done = false;\r\n  const frame = document.createElement('iframe');\r\n  window.addEventListener('message', ({data}) => {\r\n    if (data.method === 'storage' && !done) {\r\n      done = true;\r\n      resolve(data.files);\r\n      frame.contentWindow.postMessage({method: 'clear'}, '*');\r\n    }\r\n  });\r\n  frame.addEventListener('load', () => {\r\n    frame.contentWindow.postMessage({method: 'transfer'}, '*');\r\n  });\r\n  frame.addEventListener('error', () => {\r\n    if (!done) {\r\n      done = true;\r\n      resolve(null);\r\n    }\r\n  });\r\n  frame.src = \"https://diablo.rivsoft.net/storage.html\";\r\n  frame.style.display = \"none\";\r\n  document.body.appendChild(frame);\r\n  setTimeout(() => {\r\n    if (!done) {\r\n      done = true;\r\n      resolve(null);\r\n    }\r\n  }, 10000);\r\n});\r\n\r\nasync function downloadFile(store, name) {\r\n  const file = await store.get(name.toLowerCase());\r\n  if (file) {\r\n    const blob = new Blob([file], {type: 'binary/octet-stream'});\r\n    const url = URL.createObjectURL(blob);\r\n    const lnk = document.createElement('a');\r\n    lnk.setAttribute('href', url);\r\n    lnk.setAttribute('download', name);\r\n    document.body.appendChild(lnk);\r\n    lnk.click();\r\n    document.body.removeChild(lnk);\r\n    URL.revokeObjectURL(url);\r\n  } else {\r\n    console.error(`File ${name} does not exist`);\r\n  }\r\n}\r\n\r\nasync function downloadSaves(store) {\r\n  for (let name of await store.keys()) {\r\n    if (name.match(/\\.sv$/i)) {\r\n      downloadFile(store, name);\r\n    }\r\n  }\r\n}\r\n\r\nconst readFile = file => new Promise((resolve, reject) => {\r\n  const reader = new FileReader();\r\n  reader.onload = () => resolve(reader.result);\r\n  reader.onerror = () => reject(reader.error);\r\n  reader.onabort = () => reject();\r\n  reader.readAsArrayBuffer(file);\r\n});\r\nasync function uploadFile(store, files, file) {\r\n  const data = new Uint8Array(await readFile(file));\r\n  files.set(file.name.toLowerCase(), data);\r\n  return store.set(file.name.toLowerCase(), data);\r\n}\r\n\r\nexport default async function create_fs(load) {\r\n  try {\r\n    const store = new IdbKvStore('diablo_fs');\r\n    const files = new Map();\r\n    for (let [name, data] of Object.entries(await store.json())) {\r\n      files.set(name, data);\r\n    }\r\n    if (load) {\r\n      const files = await importStorage();\r\n      if (files) {\r\n        for (let [name, data] of files) {\r\n          files.set(name, data);\r\n          store.set(name, data);\r\n        }\r\n      }\r\n    }\r\n    window.DownloadFile = name => downloadFile(store, name);\r\n    window.DownloadSaves = () => downloadSaves(store);\r\n    return {\r\n      files,\r\n      update: (name, data) => store.set(name, data),\r\n      delete: name => store.remove(name),\r\n      clear: () => store.clear(),\r\n      download: name => downloadFile(store, name),\r\n      upload: file => uploadFile(store, files, file),\r\n    };\r\n  } catch (e) {\r\n    window.DownloadFile = () => console.error('IndexedDB is not supported');\r\n    window.DownloadSaves = () => console.error('IndexedDB is not supported');\r\n    return {\r\n      files: new Map(),\r\n      update: () => Promise.resolve(),\r\n      delete: () => Promise.resolve(),\r\n      clear: () => Promise.resolve(),\r\n      download: () => Promise.resolve(),\r\n      upload: () => Promise.resolve(),\r\n    };\r\n  }  \r\n}\r\n"],"sourceRoot":""}